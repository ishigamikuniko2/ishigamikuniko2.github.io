!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["dynamic-cassette"]=t():(e.Lisah=e.Lisah||{},e.Lisah["dynamic-cassette"]=t())}(this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/js/",__webpack_require__(__webpack_require__.s=4)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function CassetteForm(e,t,r,n,a,o){this.key=e,this.width=t,this.height=r,this.htmlTitle=document.title,this.canonicalUrl=n,this.referrer=document.referrer,this.tag=a,this.monitoringId=o}return CassetteForm.prototype.getKey=function(){return this.key},CassetteForm}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function CallbackForm(e,t){this.id=e,this.callback=t}return CallbackForm.prototype.getId=function(){return this.id},CallbackForm.prototype.doCallback=function(e){this.callback&&Function(this.callback+"("+e+")")()},CallbackForm}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function AbstractCassette(){this.xhr=new XMLHttpRequest}return AbstractCassette.prototype.escape=function(e){return encodeURIComponent(e)},AbstractCassette.prototype.unescape=function(e){return decodeURIComponent(e)},AbstractCassette.prototype.getCanonicalUrl=function(){for(var e=document.getElementsByTagName("link"),t=0,r=e;t<r.length;t++){var n=r[t];if(n.rel&&"canonical"==n.rel.toLowerCase())return n.href}return""},AbstractCassette.prototype.toQueryParams=function(e){for(var t="",r=0,n=Object.getOwnPropertyNames(e);r<n.length;r++){var a=n[r];(e[a]||0==e[a])&&(t=t+this.escape(a)+"="+this.escape(e[a])+"&")}return t.slice(0,-1)},AbstractCassette.BEACON_URL="https://beacon.lisah.jp/api/open/beacon/",AbstractCassette}();t.default=n},,function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function __(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r(1),c=r(2),s=(function(){function DynamicCassetteParams(){}}(),function(e){function DynamicCassette(t){var r=e.call(this)||this;return r.onLoadFunction=function(){var e=r;r.xhr.onreadystatechange=function(t){var n=t.target;switch(n.readyState){case XMLHttpRequest.DONE:if(200==n.status||304==n.status){var a,o=n.responseText;a=document.getElementById(e.callbackForm.getId()),a.innerHTML=o,e.callbackForm.doCallback(e.cassetteForm.getKey())}else console.log("Failed. HttpStatus: "+n.status);r.xhr.abort()}},r.xhr.open("GET",DynamicCassette.BEACON_URL+"?"+r.toQueryParams(r.cassetteForm),!0),r.xhr.withCredentials=!0,r.xhr.send()},r.cassetteForm=new a.default(t.k,t.w,t.h,r.getCanonicalUrl(),t.tag,t.m),r.callbackForm=new o.default(t.id,t.callback),r.onLoadFunction(),r}return n(DynamicCassette,e),DynamicCassette}(c.default));t.DynamicCassette=s}])});